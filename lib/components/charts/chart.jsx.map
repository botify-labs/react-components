{"version":3,"sources":["components/charts/chart.jsx"],"names":[],"mappings":";;;;;;;;IAAO,KAAK,2BAAM,cAAc;;IAEzB,YAAY,2BAAM,0BAA0B;;AAEnD,IAAI,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;;AAE5B,aAAW,EAAE,OAAO;;AAEpB,iBAAe,EAAA,2BAAG;AAChB,WAAO;AACL,iBAAW,EAAE,IAAI;KAClB,CAAC;GACH;;AAED,aAAW,EAAA,uBAAG;AACZ,WAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;GACtC;;AAED,QAAM,EAAA,kBAAG;AACP,WACE;AAAC,kBAAY;;AACX,kBAAU,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,AAAC;AACrC,qBAAa,EAAE,IAAI,CAAC,cAAc,AAAC;;MAEnC,oBAAC,KAAK,KAAK,CAAC,KAAK,eACX,IAAI,CAAC,KAAK;AACd,WAAG,EAAC,OAAO;AACX,WAAG,EAAC,OAAO;AACX,wBAAgB,EAAE,IAAI,CAAC,qBAAqB,AAAC;AAC7C,uBAAe,EAAE,IAAI,CAAC,oBAAoB,AAAC;AAC3C,mBAAW,EAAE,IAAI,CAAC,oBAAoB,AAAC;SACvC;KACW,CACf;GACH;;AAED,gBAAc,EAAA,0BAAG;;;AACf,QAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,gBAA4B;;;UAA1B,QAAQ;UAAE,UAAU;;AACrE,UAAI,MAAM,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAqB,GAAG,EAAK;;;YAA3B,MAAM;YAAE,QAAQ;;AACrD,YAAI,SAAS,GAAG,MAAK,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;AAC1D,YAAI,KAAK,GAAG,MAAK,KAAK,CAAC,SAAS,CAAC,iBAAiB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AACrE,eACE;;YAAI,GAAG,EAAE,GAAG,AAAC;UACX;;;YAAK,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC;WAAM;UACjC;;;YAAK,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC;WAAM;SAC1B,CACL;OACH,CAAC,CAAC;;AAEH,UAAI,OAAO,GAAG,UAAU,CAAC,GAAG,CAAC,UAAC,KAAK,EAAE,GAAG,EAAK;AAC3C,YAAI,MAAM,GAAG,MAAK,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACjD,eACE;;YAAI,GAAG,EAAE,GAAG,AAAC;UACX;;;YAAK,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC;WAAM;UAC9B;;;YAAK,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;WAAM;SACnC,CACL;OACH,CAAC,CAAC;;AAEH,aACE;;UAAO,SAAS,EAAC,eAAe;QAC9B;;YAAO,SAAS,EAAC,QAAQ;UACtB,MAAM,CAAC,IAAI,EAAE;SACR;QACR;;YAAO,SAAS,EAAC,SAAS;UACvB,OAAO,CAAC,IAAI,EAAE;SACT;OACF,CACR;KACH,CAAC,CAAC;;AAEH,WACE;;QAAK,SAAS,EAAC,cAAc;MAC1B,IAAI,CAAC,IAAI,EAAE;KACR,CACN;GACH;;AAED,uBAAqB,EAAA,+BAAC,IAAI,EAAE;;AAE1B,QAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC,CAAC;GACpC;;AAED,sBAAoB,EAAA,gCAAG;;AAErB,QAAI,CAAC,QAAQ,CAAC,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC,CAAC;GACpC;;CAEF,CAAC,CAAC;;iBAEY,KAAK","file":"components/charts/chart.jsx","sourcesContent":["import React from 'react/addons';\n\nimport HoverTooltip from '../tooltip/hover-tooltip';\n\nvar Chart = React.createClass({\n\n  displayName: 'Chart',\n\n  getInitialState() {\n    return {\n      hoveredData: null\n    };\n  },\n\n  getImageURI() {\n    return this.refs.chart.getImageURI();\n  },\n\n  render() {\n    return (\n      <HoverTooltip\n        hasTooltip={!!this.state.hoveredData}\n        renderTooltip={this._renderTooltip}\n      >\n        <this.props.chart\n          {...this.props}\n          key=\"chart\"\n          ref=\"chart\"\n          onChartMouseOver={this._handleChartMouseOver}\n          onChartMouseOut={this._handleChartMouseOut}\n          onMouseMove={this._updateMousePosition}\n        />\n      </HoverTooltip>\n    );\n  },\n\n  _renderTooltip() {\n    var data = this.state.hoveredData.entrySeq().map(([dataKeys, dataValues]) => {\n      var groups = dataKeys.entrySeq().map(([dimKey, groupKey], idx) => {\n        var dimension = this.props.chartData.getDimension(dimKey);\n        var group = this.props.chartData.getDimensionGroup(dimKey, groupKey);\n        return (\n          <tr key={idx}>\n            <td>{dimension.get('label')}</td>\n            <td>{group.get('label')}</td>\n          </tr>\n        );\n      });\n\n      var metrics = dataValues.map((value, idx) => {\n        var metric = this.props.chartData.getMetric(idx);\n        return (\n          <tr key={idx}>\n            <td>{metric.get('label')}</td>\n            <td>{metric.get('render')(value)}</td>\n          </tr>\n        );\n      });\n\n      return (\n        <table className=\"Tooltip-datum\">\n          <tbody className=\"groups\">\n            {groups.toJS()}\n          </tbody>\n          <tbody className=\"metrics\">\n            {metrics.toJS()}\n          </tbody>\n        </table>\n      );\n    });\n\n    return (\n      <div className=\"Tooltip-data\">\n        {data.toJS()}\n      </div>\n    );\n  },\n\n  _handleChartMouseOver(data) {\n    // Show the tooltip when a chart element is hovered\n    this.setState({hoveredData: data});\n  },\n\n  _handleChartMouseOut() {\n    // Hide the tooltip when a chart element stops being hovered\n    this.setState({hoveredData: null});\n  }\n\n});\n\nexport default Chart;\n"],"sourceRoot":"/source/"}